#ifndef USERPACK_H_
#define USERPACK_H_


#include "_DEBUG.h"
#include <stdint.h>
#include <vector>


#ifdef UserPack_DEBUG_MODE
#include <fstream>
#endif



/*! ----------------------------------------------------------------------------------------
 * @brief:
 * -----------------------------------------------------------------------------------------
 * */
struct UserPack {
	/*! ------------------------------------------------------------------------------------
	 * @brief: according with IEEE Std 802.15.4-2011
	 * -------------------------------------------------------------------------------------
	 * */
	enum class COMMAND : uint8_t {
		Status = 0,
		SetID,
		Distance,
		Data
	};

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	enum class STATUS : uint8_t {
		Reserved = 0,
		SetID,
		Distance,
		Data
	};

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	static const uint8_t BROADCAST_ID = 0xFF;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	COMMAND Command;
	uint8_t DestinationID;
	std::vector <uint8_t> Data;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void ToBytes(std::vector <uint8_t> &buffer) const = 0;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void ToStruct(const std::vector <uint8_t> &buffer) = 0;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void SetData(const std::vector <uint8_t> &buffer) = 0;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void Reset() = 0;

#ifdef UserPack_DEBUG_MODE
	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void Print(std::ostream &os) const = 0;
#endif

	virtual ~UserPack() {};
};



#endif /* USERPACK_H_ */
