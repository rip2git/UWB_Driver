#ifndef INI_H
#define INI_H

#include <string>
#include <map>
#include <fstream>


/* -----------------------------------------------------------------------------------------
 * Reads ini file and devides pairs (key, value) by sections
 * -----------------------------------------------------------------------------------------
 * */
class IniFile {
public:
	/* -------------------------------------------------------------------------------------
	 * Opens file and checks for errors
	 * -------------------------------------------------------------------------------------
	 * */
	IniFile(std::string fileName);

	/* -------------------------------------------------------------------------------------
	 * Closes file and clears config info
	 * -------------------------------------------------------------------------------------
	 * */
	~IniFile();

	/* -------------------------------------------------------------------------------------
	 * Reads ini file into pairs
	 * -------------------------------------------------------------------------------------
	 * */
	void Parse();

	/* -------------------------------------------------------------------------------------	 *
	 * -------------------------------------------------------------------------------------
	 * */
	bool isOpened() const;

	/* -------------------------------------------------------------------------------------
	 * Returns all sections with its pairs
	 * -------------------------------------------------------------------------------------
	 * */
	const std::map <std::string, std::map<std::string, std::string> >& GetConfig() const;

	/* -------------------------------------------------------------------------------------
	 * Returns pairs of one of sections with section_name
	 * -------------------------------------------------------------------------------------
	 * */
	const std::map <std::string, std::string>& GetSection(std::string section_name) const;

private:
	/* -------------------------------------------------------------------------------------	 *
	 * -------------------------------------------------------------------------------------
	 * */
	std::ifstream file;

	/* -------------------------------------------------------------------------------------
	 * Pairs (key, values) devided by sections
	 * -------------------------------------------------------------------------------------
	 * */
	std::map <std::string, std::map<std::string, std::string> > configInfo;

	/* -------------------------------------------------------------------------------------
	 * Resets errno
	 * -------------------------------------------------------------------------------------
	 * */
	int GetLastSystemError() const;
};

#endif
