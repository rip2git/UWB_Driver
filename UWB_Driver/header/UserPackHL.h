#ifndef USERPACKHL_H_
#define USERPACKHL_H_


#include "UserPack.h"



/*! ----------------------------------------------------------------------------------------
 * @brief:
 * -----------------------------------------------------------------------------------------
 * */
struct UserPackHL : public UserPack {
	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	uint16_t TotalSize;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	static const uint8_t DATA_OFFSET = 2 + sizeof(TotalSize);
	static const uint16_t DATA_MAX_SIZE = (1 << (8 * sizeof(TotalSize))) - 1;
	static const uint16_t PACK_MAX_SIZE =
			static_cast <uint16_t> (DATA_MAX_SIZE + DATA_OFFSET);

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void ToBytes(std::vector <uint8_t> &buffer) const;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void ToStruct(const std::vector <uint8_t> &buffer);

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void SetData(const std::vector <uint8_t> &buffer);

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void Reset();

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	UserPackHL& operator= (const UserPackHL &pack);

#ifdef UserPack_DEBUG_MODE
	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void Print(std::ostream &os) const;
#endif
};



#endif /* USERPACKHL_H_ */
