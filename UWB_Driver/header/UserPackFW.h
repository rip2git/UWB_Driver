#ifndef USERPACKFW_H_
#define USERPACKFW_H_


#include "UserPack.h"



/*! ----------------------------------------------------------------------------------------
 * @brief:
 * -----------------------------------------------------------------------------------------
 * */
struct UserPackFW : public UserPack {
	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	uint8_t TotalSize;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	static const uint8_t DATA_OFFSET = 2 + sizeof(TotalSize);

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 *
	 * NOTE: MAX_DATA_SIZE = 115 is FW requirements
	 * -------------------------------------------------------------------------------------
	 * */
	static const uint8_t SERVICE_SIZE = 2 + sizeof(TotalSize);
	static const uint8_t DATA_MAX_SIZE = 115;
	static const uint8_t FCS_SIZE = 2;
	static const uint8_t PACK_MAX_SIZE = SERVICE_SIZE + DATA_MAX_SIZE + FCS_SIZE;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void ToBytes(std::vector <uint8_t> &buffer) const;

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void ToStruct(const std::vector <uint8_t> &buffer);

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void SetData(const std::vector <uint8_t> &buffer);

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	void Reset();

	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	UserPackFW& operator= (const UserPackFW &pack);

#ifdef UserPack_DEBUG_MODE
	/*! ------------------------------------------------------------------------------------
	 * @brief:
	 * -------------------------------------------------------------------------------------
	 * */
	virtual void Print(std::ostream &os) const;
#endif
};



#endif /* USERPACKFW_H_ */
